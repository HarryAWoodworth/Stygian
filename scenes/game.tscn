[gd_scene load_steps=23 format=3 uid="uid://by2aba4ug1oc1"]

[ext_resource type="Script" path="res://scripts/game.gd" id="1_yb53y"]
[ext_resource type="Texture2D" uid="uid://cp876w51aq4df" path="res://assets/PlayerPistol.png" id="2_73m64"]
[ext_resource type="PackedScene" uid="uid://cw4yhkllc8kyb" path="res://scenes/Player.tscn" id="2_rm88x"]
[ext_resource type="PackedScene" uid="uid://bxjr1c2a3nsmu" path="res://scenes/CornerWatcher.tscn" id="3_n0274"]
[ext_resource type="Texture2D" uid="uid://elwgejcncnyr" path="res://assets/GunFire.png" id="4_dynp8"]
[ext_resource type="Script" path="res://scripts/InvisOnReady.gd" id="5_bvmrs"]
[ext_resource type="Texture2D" uid="uid://q1kem30ecmg8" path="res://assets/hand.png" id="5_qmwjr"]
[ext_resource type="Texture2D" uid="uid://c8s7q30ivo2wm" path="res://assets/bloodform.png" id="6_frpmi"]
[ext_resource type="Texture2D" uid="uid://mdkvqoslc53m" path="res://assets/middlefinger.png" id="7_2qflb"]
[ext_resource type="PackedScene" uid="uid://irs2a45c3e4q" path="res://scenes/WeepingWillow.tscn" id="7_57ndx"]
[ext_resource type="Texture2D" uid="uid://cwl263iwk1s6d" path="res://assets/vignette.png" id="8_6i6jl"]
[ext_resource type="Texture2D" uid="uid://cj6gb3vpytk71" path="res://assets/spritesheet.png" id="8_6ql7r"]
[ext_resource type="Script" path="res://scripts/Bloodball2D.gd" id="9_hvqjo"]
[ext_resource type="PackedScene" uid="uid://cixrtumnkvdh6" path="res://scenes/Vein.tscn" id="10_ln7an"]

[sub_resource type="Curve2D" id="Curve2D_42ttw"]
_data = {
"points": PackedVector2Array(0, 0, 0, 0, 173, 187, -20.2597, -37.5179, 20.2597, 37.5179, 311, 262, -70.5337, 71.2841, 70.5337, -71.2841, 471, 402, -27.0129, -68.2826, 27.0129, 68.2826, 611, 428, -25.5122, 63.0301, 25.5122, -63.0301, 744, 351, -34.7802, -9.34552, 34.7802, 9.34552, 857.259, 407.402, -61.4795, -74.6401, 61.4795, 74.6401, 932, 373, -27.9652, -36.435, 27.9652, 36.435, 991, 521, -101.298, -145.57, 101.298, 145.57, 1303, 649)
}
point_count = 9

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_is4jd"]
sky_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)
ground_horizon_color = Color(0.64625, 0.65575, 0.67075, 1)

[sub_resource type="Sky" id="Sky_6na4x"]
sky_material = SubResource( "ProceduralSkyMaterial_is4jd" )

[sub_resource type="Environment" id="Environment_baw24"]
background_mode = 2
sky = SubResource( "Sky_6na4x" )
tonemap_mode = 2
glow_enabled = true

[sub_resource type="PlaneMesh" id="PlaneMesh_l54ap"]
size = Vector2(20, 20)

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_pxe7d"]
data = PackedVector3Array(10, 0, 10, -10, 0, 10, 10, 0, -10, -10, 0, 10, -10, 0, -10, 10, 0, -10)

[sub_resource type="BoxMesh" id="BoxMesh_jcuqu"]

[sub_resource type="ConcavePolygonShape3D" id="ConcavePolygonShape3D_d4lfy"]
data = PackedVector3Array(-0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, -0.5, 0.5, -0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, 0.5, -0.5, 0.5, 0.5, 0.5, 0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, 0.5, 0.5, -0.5, 0.5, -0.5, -0.5, -0.5, 0.5, -0.5, 0.5, 0.5, -0.5, -0.5, -0.5, -0.5, -0.5)

[node name="Game" type="Node3D"]
script = ExtResource( "1_yb53y" )

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="GunFire" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(765, 377)
rotation = 1.06252
scale = Vector2(0.285278, -0.285562)
texture = ExtResource( "4_dynp8" )
script = ExtResource( "5_bvmrs" )

[node name="Gun" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(924, 485)
rotation = 2.89655
scale = Vector2(0.204069, -0.20424)
skew = 0.000537872
texture = ExtResource( "2_73m64" )
flip_h = true

[node name="LeftHand" type="Sprite2D" parent="CanvasLayer"]
position = Vector2(144, 474)
scale = Vector2(0.177538, 0.177538)
texture = ExtResource( "5_qmwjr" )

[node name="RightHand" type="Sprite2D" parent="CanvasLayer"]
position = Vector2(883, 474)
scale = Vector2(0.177538, 0.177538)
texture = ExtResource( "5_qmwjr" )
flip_h = true

[node name="BloodformLeft" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(162, 481)
scale = Vector2(0.209717, 0.209717)
texture = ExtResource( "6_frpmi" )
script = ExtResource( "5_bvmrs" )

[node name="BloodformRight" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(869, 481)
scale = Vector2(0.209717, 0.209717)
texture = ExtResource( "6_frpmi" )
flip_h = true
script = ExtResource( "5_bvmrs" )

[node name="MiddleFingerLeft" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(194, 429)
rotation = 0.0999591
scale = Vector2(0.214873, 0.214873)
texture = ExtResource( "7_2qflb" )
script = ExtResource( "5_bvmrs" )

[node name="MiddleFingerRight" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(833, 432)
rotation = -0.0761359
scale = Vector2(0.214873, 0.214873)
texture = ExtResource( "7_2qflb" )
flip_h = true
script = ExtResource( "5_bvmrs" )

[node name="Vignette" type="Sprite2D" parent="CanvasLayer"]
position = Vector2(512, 298)
scale = Vector2(0.534252, 0.564448)
texture = ExtResource( "8_6i6jl" )

[node name="Bloodball" type="Sprite2D" parent="CanvasLayer"]
visible = false
position = Vector2(505, 476)
scale = Vector2(0.42846, 0.42846)
texture = ExtResource( "8_6ql7r" )
hframes = 4
vframes = 4
script = ExtResource( "9_hvqjo" )

[node name="Timer" type="Timer" parent="CanvasLayer/Bloodball"]
wait_time = 0.07

[node name="Paths" type="Node" parent="CanvasLayer"]

[node name="Path2D" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(-232, -180)
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D2" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(160, -378)
rotation = 0.540858
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D20" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(72, -347)
rotation = 0.540858
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D21" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(221, -467)
rotation = 0.540858
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D4" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(797, -441)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D5" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1056, -758)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D6" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1056, -758)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D7" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(388, -665)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D22" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(538, -577)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D23" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(625, -574)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D24" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(752, -571)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D8" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(646, -262)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D9" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(272, -689)
rotation = 1.28052
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D10" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(21, -325)
rotation = 0.785913
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D11" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(642, -542)
rotation = 0.785913
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D12" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(329, -475)
rotation = 0.785913
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D13" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1122, -238)
rotation = 1.89243
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D14" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1292, -126)
rotation = 2.24398
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D25" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1329, -81)
rotation = 2.24398
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D26" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1383, -45)
rotation = 2.24398
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D27" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1215, -163)
rotation = 2.24398
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D15" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1417, 53)
rotation = 2.24398
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D16" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1417, 53)
rotation = 2.51039
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D17" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1332, 448)
rotation = 2.83369
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D18" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1342, 257)
rotation = 2.83369
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D19" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(1371, 570)
rotation = 2.83369
curve = SubResource( "Curve2D_42ttw" )

[node name="Path2D3" type="Path2D" parent="CanvasLayer/Paths"]
position = Vector2(-294, 85)
rotation = -0.253644
curve = SubResource( "Curve2D_42ttw" )

[node name="Veins" type="Node" parent="CanvasLayer"]

[node name="Vein2" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(98, 546)
rotation = 0.82973

[node name="Vein3" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(21, 545)
rotation = 0.82973

[node name="Vein4" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(912, 538)
rotation = 2.23631

[node name="Vein5" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(987, 522)
rotation = 2.23631

[node name="Vein6" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(937, 509)
rotation = 2.23631

[node name="Vein7" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(141, 490)
rotation = 0.973213

[node name="Vein8" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(38, 573)
rotation = 0.759868

[node name="Vein9" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(876, 550)
rotation = -0.731555

[node name="Vein10" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(989, 572)
rotation = -0.731555

[node name="Vein11" parent="CanvasLayer/Veins" instance=ExtResource( "10_ln7an" )]
position = Vector2(137, 541)
rotation = 0.486407

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource( "Environment_baw24" )

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866025, -0.433013, 0.25, 0, 0.5, 0.866025, -0.5, 0.75, -0.433013, 0, 0, 0)
visible = false
shadow_enabled = true
directional_shadow_max_distance = 250.0

[node name="Player" parent="." instance=ExtResource( "2_rm88x" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -5.29696)

[node name="Floor" type="MeshInstance3D" parent="."]
mesh = SubResource( "PlaneMesh_l54ap" )

[node name="StaticBody3D" type="StaticBody3D" parent="Floor"]

[node name="CollisionShape" type="CollisionShape3D" parent="Floor/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_pxe7d" )

[node name="TestObstacles" type="Node" parent="."]

[node name="Test" type="MeshInstance3D" parent="TestObstacles"]
transform = Transform3D(1, 0, 0, 0, 2.85401, 0, 0, 0, 1, -2.50219, 1.31118, 1.63882)
mesh = SubResource( "BoxMesh_jcuqu" )
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="TestObstacles/Test"]

[node name="@@39257" type="CollisionShape3D" parent="TestObstacles/Test/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_d4lfy" )

[node name="Test2" type="MeshInstance3D" parent="TestObstacles"]
transform = Transform3D(1, 0, 0, 0, 2.85401, 0, 0, 0, 1, -5.18417, 1.31118, 1.63882)
mesh = SubResource( "BoxMesh_jcuqu" )
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="TestObstacles/Test2"]

[node name="39257" type="CollisionShape3D" parent="TestObstacles/Test2/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_d4lfy" )

[node name="Test3" type="MeshInstance3D" parent="TestObstacles"]
transform = Transform3D(0.0040142, 2.85399, 0, -0.999992, 0.0114566, 0, 0, 0, 1, -3.91405, 1.68771, 1.63882)
mesh = SubResource( "BoxMesh_jcuqu" )
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="TestObstacles/Test3"]

[node name="39257" type="CollisionShape3D" parent="TestObstacles/Test3/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_d4lfy" )

[node name="Test4" type="MeshInstance3D" parent="TestObstacles"]
transform = Transform3D(0.0040142, 2.85399, 0, -0.999992, 0.0114566, 0, 0, 0, 1, -3.91405, 0.449172, -2.09457)
mesh = SubResource( "BoxMesh_jcuqu" )
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="TestObstacles/Test4"]

[node name="39257" type="CollisionShape3D" parent="TestObstacles/Test4/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_d4lfy" )

[node name="Test5" type="MeshInstance3D" parent="TestObstacles"]
transform = Transform3D(0.0040142, 2.85399, 0, -0.999992, 0.0114566, 0, 0, 0, 1, -3.91405, 0.901203, -4.17931)
mesh = SubResource( "BoxMesh_jcuqu" )
skeleton = NodePath("../..")

[node name="StaticBody3D" type="StaticBody3D" parent="TestObstacles/Test5"]

[node name="39257" type="CollisionShape3D" parent="TestObstacles/Test5/StaticBody3D"]
shape = SubResource( "ConcavePolygonShape3D_d4lfy" )

[node name="Actors" type="Node" parent="."]

[node name="WeepingWillows" type="Node" parent="Actors"]

[node name="WeepingWillow" parent="Actors/WeepingWillows" instance=ExtResource( "7_57ndx" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.9592, 1, 0)

[node name="CornerWatchers" type="Node" parent="Actors"]

[node name="CornerWatcher" parent="Actors/CornerWatchers" instance=ExtResource( "3_n0274" )]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 6.26149)

[node name="Projectiles" type="Node" parent="."]

[node name="FingerTimer" type="Timer" parent="."]
wait_time = 2.0

[node name="VignetteTimer" type="Timer" parent="."]

[connection signal="bloodball_charged" from="CanvasLayer/Bloodball" to="." method="_on_bloodball_bloodball_charged"]
[connection signal="timeout" from="CanvasLayer/Bloodball/Timer" to="CanvasLayer/Bloodball" method="_on_timer_timeout"]
[connection signal="fire_blood_shot" from="Player" to="." method="_on_player_fire_blood_shot"]
[connection signal="form_blood_shot" from="Player" to="." method="_on_player_form_blood_shot"]
[connection signal="make_bug" from="Player" to="." method="_on_player_make_bug"]
[connection signal="player_died" from="Player" to="." method="_on_player_player_died"]
[connection signal="player_took_damage" from="Player" to="." method="_on_player_player_took_damage"]
[connection signal="player_updated_blood" from="Player" to="." method="_on_player_player_updated_blood"]
[connection signal="timeout" from="FingerTimer" to="." method="_on_finger_timer_timeout"]
[connection signal="timeout" from="VignetteTimer" to="." method="_on_vignette_timer_timeout"]
